<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:1,&quot;tests&quot;:2,&quot;passes&quot;:2,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2023-05-24T12:38:15.482Z&quot;,&quot;end&quot;:&quot;2023-05-24T12:38:15.543Z&quot;,&quot;duration&quot;:61,&quot;testsRegistered&quot;:2,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;e42a1f7a-d05a-4cd5-adf2-fb8d7a559a1e&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;D:\\EslintApigee\\test\\test.apigee.js&quot;,&quot;file&quot;:&quot;\\test.apigee.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;contextGetVariableMethod = sinon.stub(context, &#x27;getVariable&#x27;);\ncontextSetVariableMethod = sinon.stub(context, &#x27;setVariable&#x27;);\n//sinon.spy(object, \&quot;method\&quot;) creates a spy that wraps the existing function object.method. The spy will behave exactly like the original method (including when used as a constructor)\nrequestConstructor = sinon.spy(global, &#x27;Request&#x27;);\nhttpClientSendMethod = sinon.spy(httpClient, &#x27;send&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c00e948-732a-49ab-a435-f1baded8c276&quot;,&quot;parentUUID&quot;:&quot;e42a1f7a-d05a-4cd5-adf2-fb8d7a559a1e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;contextGetVariableMethod.restore();\ncontextSetVariableMethod.restore();\nrequestConstructor.restore();\nhttpClientSendMethod.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb1fa2b9-5cf3-4d87-824e-63e0aa151940&quot;,&quot;parentUUID&quot;:&quot;e42a1f7a-d05a-4cd5-adf2-fb8d7a559a1e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;aec1556d-5b34-42a6-b50e-7f5854b8b741&quot;,&quot;title&quot;:&quot;feature: Testing the Request function&quot;,&quot;fullFile&quot;:&quot;D:\\EslintApigee\\test\\test.apigee.js&quot;,&quot;file&quot;:&quot;\\test.apigee.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should log success responses correctly&quot;,&quot;fullTitle&quot;:&quot;feature: Testing the Request function should log success responses correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//withArgs Stubs the method only for the provided arguments.\ncontextGetVariableMethod.withArgs(&#x27;organization.name&#x27;).returns(&#x27;org1&#x27;);\ncontextGetVariableMethod.withArgs(&#x27;environment.name&#x27;).returns(&#x27;env1&#x27;);\ncontextGetVariableMethod.withArgs(&#x27;response.status.code&#x27;).returns(&#x27;200&#x27;);\n\n\nvar errorThrown = false;\ntry { requireUncached(jsFile);} catch (e) { errorThrown = true; }\nexpect(errorThrown).to.equal(false);\n        // to test that httpClient and request method was called for the apigee.js file once \n// calledOnce - Passes if spy was called once and only once.\nexpect(httpClientSendMethod.calledOnce).to.be.true;  // true.to.be.true\nexpect(requestConstructor.calledOnce).to.be.true;\n//var temp = contextSetVariableMethod.getCall(0);\n//calledOnce boolean property and the returned objectâ€™s args property.\nvar requestConstructorArgs = requestConstructor.args[0];\nconsole.log(requestConstructorArgs);\n//expect(temp.args[0]).to.equal(&#x27;validateResponseType.isValid&#x27;);\nexpect(requestConstructorArgs[0]).to.equal(&#x27;https://loggly.com/aaa&#x27;);\t\t\nexpect(requestConstructorArgs[1]).to.equal(&#x27;POST&#x27;);\t\t\nexpect(requestConstructorArgs[2][&#x27;Content-Type&#x27;]).to.equal(&#x27;application/json&#x27;);\t\t\nvar logObject = JSON.parse(requestConstructorArgs[3]);\nconsole.log(logObject);\nexpect(logObject.org).to.equal(&#x27;org1&#x27;);\t\t\nexpect(logObject.env).to.equal(&#x27;env1&#x27;);\t\t\nexpect(logObject.responseCode).to.equal(200);\t\t\nexpect(logObject.isError).to.be.false;\nexpect(logObject).to.not.have.property(&#x27;errorMessage&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48bd4ab9-4147-4a4f-91de-a978ebf3ccbf&quot;,&quot;parentUUID&quot;:&quot;aec1556d-5b34-42a6-b50e-7f5854b8b741&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should log failure responses correctly&quot;,&quot;fullTitle&quot;:&quot;feature: Testing the Request function should log failure responses correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;contextGetVariableMethod.withArgs(&#x27;organization.name&#x27;).returns(&#x27;org1&#x27;);\ncontextGetVariableMethod.withArgs(&#x27;environment.name&#x27;).returns(&#x27;env1&#x27;);\ncontextGetVariableMethod.withArgs(&#x27;response.status.code&#x27;).returns(&#x27;400&#x27;);\ncontextGetVariableMethod.withArgs(&#x27;flow.error.message&#x27;).returns(&#x27;this is a helpful error message&#x27;);\n\nvar errorThrown = false;\ntry { requireUncached(jsFile);} catch (e) { errorThrown = true; }\n\nexpect(errorThrown).to.equal(false);\n\nexpect(httpClientSendMethod.calledOnce).to.be.true;\nexpect(requestConstructor.calledOnce).to.be.true;\nvar requestConstructorArgs = requestConstructor.args[0];\nexpect(requestConstructorArgs[0]).to.equal(&#x27;https://loggly.com/aaa&#x27;);\t\t\nexpect(requestConstructorArgs[1]).to.equal(&#x27;POST&#x27;);\t\t\nexpect(requestConstructorArgs[2][&#x27;Content-Type&#x27;]).to.equal(&#x27;application/json&#x27;);\t\t\nvar logObject = JSON.parse(requestConstructorArgs[3]);\nexpect(logObject.org).to.equal(&#x27;org1&#x27;);\t\t\nexpect(logObject.env).to.equal(&#x27;env1&#x27;);\t\t\nexpect(logObject.responseCode).to.equal(400);\t\t\nexpect(logObject.isError).to.be.true;\nexpect(logObject.errorMessage).to.equal(&#x27;this is a helpful error message&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0fdfc35e-c6e1-4fd2-96b0-cea1d610a86a&quot;,&quot;parentUUID&quot;:&quot;aec1556d-5b34-42a6-b50e-7f5854b8b741&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;48bd4ab9-4147-4a4f-91de-a978ebf3ccbf&quot;,&quot;0fdfc35e-c6e1-4fd2-96b0-cea1d610a86a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:32,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;test&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report\\assets&quot;,&quot;jsonFile&quot;:&quot;D:\\EslintApigee\\test\\mochawesome-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;D:\\EslintApigee\\test\\mochawesome-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>